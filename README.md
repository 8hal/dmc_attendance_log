# DMC Attendance Log

QR ê¸°ë°˜ ì¶œì„ ì²´í¬ ê²½í—˜ì„ ê°œì„ í•˜ê³ , ê´€ë¦¬ìê°€ ë¶„ì„ ê°€ëŠ¥í•œ ê³ í’ˆì§ˆ ì¶œì„ ë°ì´í„°ë¥¼ ì–»ê¸° ìœ„í•œ
**Firebase ê¸°ë°˜** ì¶œì„ ì‹œìŠ¤í…œì…ë‹ˆë‹¤.

## í”„ë¡œì íŠ¸ ë°°ê²½

ë§ˆë¼í†¤í´ëŸ½ì˜ QR ì¶œì„ ë„ì… ì´í›„, ê¸°ì¡´ êµ¬ê¸€ í¼ ì…ë ¥ ê²½í—˜ì´ ë¹„íš¨ìœ¨ì ì´ì—ˆìŠµë‹ˆë‹¤.
ì¶œì„ìëŠ” ë§¤ë²ˆ ë™ì¼í•œ ì •ë³´ë¥¼ ë°˜ë³µ ì…ë ¥í•´ì•¼ í•˜ê³ , ì˜¤ëŠ˜ ë‚ ì§œì²˜ëŸ¼ ìë™í™” ê°€ëŠ¥í•œ ì •ë³´ê¹Œì§€
ìˆ˜ë™ ì…ë ¥í•´ì•¼ í•˜ëŠ” ë¬¸ì œê°€ ìˆì—ˆìŠµë‹ˆë‹¤.

## ëª©í‘œ

- ì¶œì„ ì²´í¬ìê°€ ì‘ë‹µì— ê±¸ë¦¬ëŠ” ì‹œê°„ê³¼ í”¼ë¡œë„ë¥¼ 0ì— ê°€ê¹ê²Œ ê°ì†Œ
- ê´€ë¦¬ìê°€ ë°ì´í„° ë¶„ì„ì— í•„ìš”í•œ í’ˆì§ˆ ì¢‹ì€ ì¶œì„ ë°ì´í„°ë¥¼ í™•ë³´

## ì„±ê³µ ì§€í‘œ

- ì¶œì„ ì™„ë£Œ ìˆ˜: íŠ¹ì • ëª¨ì„ì¼ ê¸°ì¤€ ìœ íš¨ ì‘ë‹µ ìˆ˜(ì¤‘ë³µ/ì˜¤ë¥˜ ì œì™¸)
- ì¶œì„ ì „í™˜ìœ¨: QR ë°©ë¬¸ ëŒ€ë¹„ ìœ íš¨ ì œì¶œ ë¹„ìœ¨
- ë°ì´í„° í’ˆì§ˆ
  - ì˜ëª»ëœ ë‹‰ë„¤ì„ ì…ë ¥ë¥ 
  - ì¤‘ë³µ ì œì¶œë¥ 
  - í•„ìˆ˜ í•„ë“œ ëˆ„ë½ë¥ 

## ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì‚¬ìš©ì (QR ìŠ¤ìº”)                                            â”‚
â”‚         â†“                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚  GitHub Pages   â”‚     â”‚ Firebase Hosting â”‚                â”‚
â”‚  â”‚  (í”„ë¡œë•ì…˜ FE)   â”‚     â”‚   (ë°±ì—… FE)      â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚           â”‚                       â”‚                          â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                       â†“                                      â”‚
â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚           â”‚  Firebase Functions   â”‚  â† API (asia-northeast3) â”‚
â”‚           â”‚  (Cloud Functions)    â”‚                          â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                       â†“                                      â”‚
â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚           â”‚      Firestore        â”‚  â† ë©”ì¸ ë°ì´í„°ë² ì´ìŠ¤      â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                       â†“                                      â”‚
â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚           â”‚    Google Sheets      â”‚  â† ì‹¤ì‹œê°„ ë°±ì—…           â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì„±ëŠ¥ ê°œì„  (2026. 1. 11.)

| êµ¬ë¶„ | ì´ì „ (Apps Script) | í˜„ì¬ (Firebase) | ê°œì„  |
|-----|-------------------|-----------------|------|
| API ì‘ë‹µ ì†ë„ | 500~2000ms | 100~300ms | **5~10ë°° í–¥ìƒ** |
| Cold Start | ëŠë¦¼ | ë¹ ë¦„ | ì²´ê° ì†ë„ ê°œì„  |

## ì‚¬ìš©ì íë¦„ ìš”ì•½

1. ì‚¬ìš©ìê°€ QR ì½”ë“œë¥¼ ìŠ¤ìº”í•´ ì¶œì„ í˜ì´ì§€ë¡œ ì´ë™
2. ë‹‰ë„¤ì„/íŒ€/ëª¨ì„ìœ í˜•/ë‚ ì§œë¥¼ ê°„í¸ ì…ë ¥ í›„ ì œì¶œ
3. Firebase Functionsê°€ Firestoreì— ì €ì¥í•˜ê³ , Google Sheetsì— ì‹¤ì‹œê°„ ë°±ì—…
4. í•´ë‹¹ ë‚ ì§œì˜ ì¶œì„ í˜„í™©ì„ ë°˜í™˜
5. ì¶œì„ì ëª©ë¡ì—ì„œ ë‹‰ë„¤ì„ì„ ì„ íƒí•´ ì›”ê°„ ì¶œì„ ê¸°ë¡ì„ í™•ì¸

## ì›¹ í˜ì´ì§€

- `index.html`: ì¶œì„ ì²´í¬ ë° ë‹¹ì¼ ì¶œì„ í˜„í™©
- `history.html`: ë‹‰ë„¤ì„ë³„ ì›”ê°„ ì¶œì„ ê¸°ë¡(ì¶œì„ë¥  ë°” í¬í•¨)

### ì„œë¹„ìŠ¤ URL

| ìš©ë„ | URL |
|-----|-----|
| **í”„ë¡œë•ì…˜ (QR)** | https://8hal.github.io/dmc_attendance_log/ |
| Firebase Hosting | https://dmc-attendance.web.app |

## ë°ì´í„° ìŠ¤í‚¤ë§ˆ

### Firestore (`attendance` ì»¬ë ‰ì…˜)

| í•„ë“œ | íƒ€ì… | ì„¤ëª… |
|-----|------|------|
| nickname | string | ë‹‰ë„¤ì„ |
| nicknameKey | string | ê²€ìƒ‰ìš© ì†Œë¬¸ì ë‹‰ë„¤ì„ |
| team | string | íŒ€ ì½”ë“œ (T1~T5, S) |
| teamLabel | string | íŒ€ ë¼ë²¨ (1íŒ€~5íŒ€, SíŒ€) |
| meetingType | string | ëª¨ì„ ìœ í˜• ì½”ë“œ (TUE, THU, SAT, ETC) |
| meetingTypeLabel | string | ëª¨ì„ ìœ í˜• ë¼ë²¨ |
| meetingDateKey | string | ëª¨ì„ ë‚ ì§œ (YYYY/MM/DD) |
| monthKey | string | ì›” í‚¤ (YYYY-MM) |
| timestamp | Timestamp | ì„œë²„ íƒ€ì„ìŠ¤íƒ¬í”„ |
| ts | number | í´ë¼ì´ì–¸íŠ¸ íƒ€ì„ìŠ¤íƒ¬í”„ (ms) |

### Google Sheets (ë°±ì—…)

- A: timestamp (DateTime)
- B: nickname (string)
- C: teamLabel (string, ì˜ˆ: 1íŒ€, SíŒ€)
- D: meetingTypeLabel (string, ì˜ˆ: í† ìš”ì¼, ê¸°íƒ€)
- E: meetingDate (YYYY/MM/DD)

## API

### POST /attendance

ì¶œì„ ë“±ë¡

**ìš”ì²­ í•„ë“œ**
- nickname: string
- team: enum code (T1..T5, S)
- meetingType: enum code (ETC, TUE, THU, SAT)
- meetingDate: YYYY/MM/DD

**ì‘ë‹µ**
- ì €ì¥ëœ ì¶œì„ ì •ë³´ì™€ í•´ë‹¹ ë‚ ì§œì˜ ì¶œì„ í˜„í™©

### GET /attendance?action=status&date=YYYY/MM/DD

ë‚ ì§œë³„ ì¶œì„ í˜„í™© ì¡°íšŒ

- date íŒŒë¼ë¯¸í„° ìƒëµ ì‹œ KST ê¸°ì¤€ ì˜¤ëŠ˜ ë‚ ì§œë¡œ ì¡°íšŒ

### GET /attendance?action=history&nickname=xxx&month=YYYY-MM

ë‹‰ë„¤ì„ë³„ ì›”ê°„ ì¶œì„ ê¸°ë¡ ì¡°íšŒ

## ê°œë°œ ë° ë°°í¬

### Firebase í”„ë¡œì íŠ¸

- í”„ë¡œì íŠ¸ ID: `dmc-attendance`
- ë¦¬ì „: `asia-northeast3` (ì„œìš¸)

### ë°°í¬

```bash
# Functions ë°°í¬
firebase deploy --only functions

# Hosting ë°°í¬
firebase deploy --only hosting

# ì „ì²´ ë°°í¬
firebase deploy
```

### ë¡œì»¬ í…ŒìŠ¤íŠ¸

```bash
# Functions ì—ë®¬ë ˆì´í„°
cd functions
npm run serve

# ë¡œì»¬ ì„œë²„ (í”„ë¡ íŠ¸ì—”ë“œ)
python3 -m http.server 8080
```

## ìŠ¤í¬ë¦½íŠ¸

### ë§ˆì´ê·¸ë ˆì´ì…˜ (Sheets â†’ Firestore)

```bash
cd scripts

# 1. Google Sheetsì—ì„œ CSV ë‚´ë³´ë‚´ê¸° í›„ data.csvë¡œ ì €ì¥
# 2. service-account.json ì¤€ë¹„

npm run migrate
```

### í…ŒìŠ¤íŠ¸ ë°ì´í„° ì •ë¦¬

```bash
cd scripts

# ì‚­ì œ ëŒ€ìƒ ë¯¸ë¦¬ë³´ê¸° (dry-run)
npm run cleanup:dry

# ì‹¤ì œ ì‚­ì œ (Firestore + Sheets)
npm run cleanup
```

## Analytics (GA4)

`index.html`ê³¼ `history.html`ì˜ `GA_MEASUREMENT_ID`ì— GA4 ì¸¡ì • IDë¥¼ ì…ë ¥í•˜ë©´ ì´ë²¤íŠ¸ê°€ ì „ì†¡ë©ë‹ˆë‹¤.

**ì´ë²¤íŠ¸ ëª©ë¡**
- attendance_view: date_key, meeting_type, meeting_type_auto
- attendance_date_change: date_key, meeting_type, meeting_type_auto
- attendance_meeting_type_change: meeting_type
- attendance_submit_attempt: date_key, meeting_type, team
- attendance_submit_success: date_key, meeting_type, team, duration_ms, page_to_submit_ms
- attendance_submit_error: error_type, date_key(optional)
- attendance_status_fetch_success: date_key
- attendance_status_fetch_error: date_key
- history_view: nickname_present, month
- history_fetch_success: month, latency_ms, count
- history_back_click: month

## ê¸°ìˆ  ìŠ¤íƒ

- **Frontend**: HTML, CSS, JavaScript (Vanilla)
- **Backend**: Firebase Cloud Functions (Node.js)
- **Database**: Firestore
- **Backup**: Google Sheets (ì‹¤ì‹œê°„ ë™ê¸°í™”)
- **Hosting**: GitHub Pages, Firebase Hosting
- **Analytics**: Google Analytics 4

## ë³€ê²½ ì´ë ¥

### 2026. 1. 14. - UI ë¦¬ë‰´ì–¼ ğŸ¨

- **ì¶œì„ ì²´í¬ í¼ êµ¬ì¡° ê°œì„ **
  - ë‹‰ë„¤ì„ â†’ ì†Œì†íŒ€ â†’ ì¶œì„ ì²´í¬ ë²„íŠ¼ â†’ ìƒì„¸ ì„¤ì •(ì ‘í˜)
  - ë‚ ì§œ/ì •ëª¨ ìœ í˜•ì„ ì•„ì½”ë””ì–¸ìœ¼ë¡œ ìˆ¨ê¹€ ì²˜ë¦¬ (ìì£¼ ë³€ê²½í•˜ì§€ ì•ŠëŠ” ê°’)
- **ë¸”ë£¨ ìŠ¤ì¹´ì´ ìƒ‰ìƒ íŒ”ë ˆíŠ¸ ì ìš©**
  - Primary: `#2563EB`
  - ì…ë ¥ í•„ë“œ í¬ì»¤ìŠ¤ íš¨ê³¼, ë²„íŠ¼ í˜¸ë²„ íš¨ê³¼ ì¶”ê°€
- **ì¶œì„ ì²´í¬ ë²„íŠ¼ ê°•ì¡°** (60px ë†’ì´, ì„¸ë¯¸ë³¼ë“œ)
- **ì›”ë³„ ê¸°ë¡ í˜ì´ì§€ ê°œì„ **
  - ê³µìœ  ë²„íŠ¼ì„ ìƒë‹¨ ë„¤ë¹„ê²Œì´ì…˜ìœ¼ë¡œ ì´ë™
  - í•˜ë‹¨ ë²„íŠ¼ ì˜ì—­ ì œê±°
- **SNS ê³µìœ  ì´ë¯¸ì§€ ê°œì„ **
  - 10% ë‹¨ìœ„ ì›í˜• í”„ë¡œê·¸ë ˆìŠ¤ ë°” ì´ë¯¸ì§€ ì ìš©
  - `html2canvas` í˜¸í™˜ì„± ë¬¸ì œ í•´ê²°

### 2026. 1. 11. - Firebase ë§ˆì´ê·¸ë ˆì´ì…˜ ğŸš€

- Google Apps Script â†’ Firebase Cloud Functions ì „í™˜
- Google Sheets â†’ Firestore ë§ˆì´ê·¸ë ˆì´ì…˜ (99ê°œ ë°ì´í„°)
- API ì‘ë‹µ ì†ë„ 5~10ë°° í–¥ìƒ (500~2000ms â†’ 100~300ms)
- ì‹¤ì‹œê°„ Google Sheets ë°±ì—… ê¸°ëŠ¥ ì¶”ê°€
- í…ŒìŠ¤íŠ¸ ë°ì´í„° ì •ë¦¬ ìŠ¤í¬ë¦½íŠ¸ ì¶”ê°€

### 2026. 1. 7.

- GA4 ì´ë²¤íŠ¸ ì¶”ê°€
- ì›”ë³„ ì¶œì„ í˜„í™© ë³´ê¸° ë·° ì¶”ê°€
- ì œì¶œ ë ˆì´í„´ì‹œ ì¸¡ì • ì²´ê³„ êµ¬ì¶•
- UI ì—…ë°ì´íŠ¸

## í–¥í›„ ê³„íš

- ~~GA ì¶”ê°€ë¥¼ í†µí•œ ì‚¬ìš©ì í–‰ë™ ë¡œê·¸ ë° ë¶„ì„ í™˜ê²½ êµ¬ì¶•~~ (ì™„ë£Œ: 2026. 1. 7.)
- ~~ì›”ë³„ ì¶œì„ í˜„í™© ë³´ê¸° ë·° ì¶”ê°€ë¡œ ì¶œì„ ì²´í¬ í–‰ë™ì˜ íš¨ìš©ì„ ë†’ì—¬ ì¶œì„ ì²´í¬ìœ¨ ì¦ëŒ€~~ (ì™„ë£Œ: 2026. 1. 7.)
- ~~ì œì¶œ ë ˆì´í„´ì‹œ ì¸¡ì • ì²´ê³„ êµ¬ì¶• (í´ë¼ì´ì–¸íŠ¸/ì„œë²„ êµ¬ê°„ ë¶„ë¦¬)~~ (ì™„ë£Œ: 2026. 1. 7.)
- ~~ì œì¶œ ë ˆì´í„´ì‹œ ìµœì í™”ë¡œ ì‘ë‹µ ì²´ê° ì†ë„ ê°œì„ ~~ (ì™„ë£Œ: 2026. 1. 11. - Firebase ë§ˆì´ê·¸ë ˆì´ì…˜)
- ~~ì…ë ¥ ìë™í™” ê°œì„  ë° ì¤‘ë³µ ì œì¶œ ë°©ì§€ ë¡œì§ ê°•í™”~~ (ì™„ë£Œ: 2026. 1. 7.)
- ~~ì›”ë³„ ì¶œì„ ê¸°ë¡ SNS ê³µìœ  ê¸°ëŠ¥~~ (ì™„ë£Œ: 2026. 1. 14.)
- ~~UI ë¦¬ë‰´ì–¼ ë° ìƒ‰ìƒ íŒ”ë ˆíŠ¸ ê°œì„ ~~ (ì™„ë£Œ: 2026. 1. 14.)
- ì§€í‘œ ëŒ€ì‹œë³´ë“œ ë° í’ˆì§ˆ ê²€ì¦ ë£° í™•ì¥
- ë¼ë²¨ í”„ë¦°í„° ì—°ë™ìœ¼ë¡œ ì¶œì„ í›„ ìŠ¤í‹°ì»¤ ë¼ë²¨ ì¶œë ¥ ì œê³µ
- ì›”ë³„ ì¶œì„ í˜„í™© ê²Œì‹œë¬¼ì„ ìë™ ìƒì„±í•´ ì¹´í˜ì— ê²Œì‹œ

## ë¼ì´ì„ ìŠ¤

TBD
